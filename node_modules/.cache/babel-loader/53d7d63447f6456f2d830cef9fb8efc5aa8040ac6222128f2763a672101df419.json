{"ast":null,"code":"'use strict';\n\nimport _objectSpread from \"/Users/carter/WebstormProjects/personal-website/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _defineProperty from \"/Users/carter/WebstormProjects/personal-website/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nimport React from 'react';\nimport { Platform } from 'react-native';\nimport \"../layoutReanimation/animationsManager.js\";\nimport invariant from 'invariant';\nimport { adaptViewConfig } from \"../ConfigHelper.js\";\nimport { findHostInstance } from '../platform-specific/findHostInstance';\nimport { enableLayoutAnimations } from \"../core.js\";\nimport { SharedTransition, LayoutAnimationType } from \"../layoutReanimation/index.js\";\nimport { getShadowNodeWrapperFromRef } from '../fabricUtils';\nimport { removeFromPropsRegistry } from \"../PropsRegistry.js\";\nimport { getReduceMotionFromConfig } from \"../animation/util.js\";\nimport { maybeBuild } from \"../animationBuilder.js\";\nimport { SkipEnteringContext } from \"../component/LayoutAnimationConfig.js\";\nimport JSPropsUpdater from './JSPropsUpdater';\nimport { flattenArray } from \"./utils.js\";\nimport setAndForwardRef from \"./setAndForwardRef.js\";\nimport { isFabric, isJest, isWeb, shouldBeUseWeb } from \"../PlatformChecker.js\";\nimport { InlinePropManager } from \"./InlinePropManager.js\";\nimport { PropsFilter } from \"./PropsFilter.js\";\nimport { startWebLayoutAnimation, tryActivateLayoutTransition, configureWebLayoutAnimations, getReducedMotionFromConfig, saveSnapshot } from \"../layoutReanimation/web/index.js\";\nimport { updateLayoutAnimations } from \"../UpdateLayoutAnimations.js\";\nimport { addHTMLMutationObserver } from \"../layoutReanimation/web/domUtils.js\";\nimport { getViewInfo } from \"./getViewInfo.js\";\nimport { NativeEventsManager } from \"./NativeEventsManager.js\";\nimport { ReanimatedError } from \"../errors.js\";\nconst IS_WEB = isWeb();\nconst IS_JEST = isJest();\nconst SHOULD_BE_USE_WEB = shouldBeUseWeb();\nif (IS_WEB) {\n  configureWebLayoutAnimations();\n}\nfunction onlyAnimatedStyles(styles) {\n  return styles.filter(style => style === null || style === void 0 ? void 0 : style.viewDescriptors);\n}\n\n/**\n * Lets you create an Animated version of any React Native component.\n *\n * @param component - The component you want to make animatable.\n * @returns A component that Reanimated is capable of animating.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/core/createAnimatedComponent\n */\n\n// Don't change the order of overloads, since such a change breaks current behavior\n\n/**\n * @deprecated Please use `Animated.FlatList` component instead of calling\n *   `Animated.createAnimatedComponent(FlatList)` manually.\n */\n// @ts-ignore This is required to create this overload, since type of createAnimatedComponent is incorrect and doesn't include typeof FlatList\n\nlet id = 0;\nexport function createAnimatedComponent(Component, options) {\n  invariant(typeof Component !== 'function' || Component.prototype && Component.prototype.isReactComponent, \"Looks like you're passing a function component `\".concat(Component.name, \"` to `createAnimatedComponent` function which supports only class components. Please wrap your function component with `React.forwardRef()` or use a class component instead.\"));\n  class AnimatedComponent extends React.Component {\n    constructor(props) {\n      super(props);\n      _defineProperty(this, \"_styles\", null);\n      _defineProperty(this, \"_isFirstRender\", true);\n      _defineProperty(this, \"jestAnimatedStyle\", {\n        value: {}\n      });\n      _defineProperty(this, \"_componentRef\", null);\n      _defineProperty(this, \"_sharedElementTransition\", null);\n      _defineProperty(this, \"_jsPropsUpdater\", new JSPropsUpdater());\n      _defineProperty(this, \"_InlinePropManager\", new InlinePropManager());\n      _defineProperty(this, \"_PropsFilter\", new PropsFilter());\n      _defineProperty(this, \"reanimatedID\", id++);\n      _defineProperty(this, \"_resolveComponentRef\", ref => {\n        const componentRef = ref;\n        // Component can specify ref which should be animated when animated version of the component is created.\n        // Otherwise, we animate the component itself.\n        if (componentRef && componentRef.getAnimatableRef) {\n          return componentRef.getAnimatableRef();\n        }\n        return componentRef;\n      });\n      _defineProperty(this, \"_setComponentRef\", setAndForwardRef({\n        getForwardedRef: () => this.props.forwardedRef,\n        setLocalRef: ref => {\n          if (!ref) {\n            // component has been unmounted\n            return;\n          }\n          if (ref !== this._componentRef) {\n            this._componentRef = this._resolveComponentRef(ref);\n            // if ref is changed, reset viewInfo\n            this._viewInfo = undefined;\n          }\n          const tag = this.getComponentViewTag();\n          const {\n            layout,\n            entering,\n            exiting,\n            sharedTransitionTag\n          } = this.props;\n          if (layout || entering || exiting || sharedTransitionTag) {\n            var _this$context;\n            if (!SHOULD_BE_USE_WEB) {\n              enableLayoutAnimations(true, false);\n            }\n            if (sharedTransitionTag) {\n              this._configureSharedTransition();\n            }\n            if (exiting && isFabric()) {\n              const reduceMotionInExiting = 'getReduceMotion' in exiting && typeof exiting.getReduceMotion === 'function' ? getReduceMotionFromConfig(exiting.getReduceMotion()) : getReduceMotionFromConfig();\n              if (!reduceMotionInExiting) {\n                var _this$props;\n                updateLayoutAnimations(tag, LayoutAnimationType.EXITING, maybeBuild(exiting, (_this$props = this.props) === null || _this$props === void 0 ? void 0 : _this$props.style, AnimatedComponent.displayName));\n              }\n            }\n            const skipEntering = (_this$context = this.context) === null || _this$context === void 0 ? void 0 : _this$context.current;\n            if (entering && !skipEntering && !IS_WEB) {\n              var _this$props2;\n              updateLayoutAnimations(tag, LayoutAnimationType.ENTERING, maybeBuild(entering, (_this$props2 = this.props) === null || _this$props2 === void 0 ? void 0 : _this$props2.style, AnimatedComponent.displayName));\n            }\n          }\n        }\n      }));\n      if (IS_JEST) {\n        this.jestAnimatedStyle = {\n          value: {}\n        };\n      }\n      const _entering = this.props.entering;\n      if (_entering && isFabric()) {\n        var _this$props3;\n        updateLayoutAnimations(this.reanimatedID, LayoutAnimationType.ENTERING, maybeBuild(_entering, (_this$props3 = this.props) === null || _this$props3 === void 0 ? void 0 : _this$props3.style, AnimatedComponent.displayName));\n      }\n    }\n    componentDidMount() {\n      var _this$_NativeEventsMa;\n      if (!IS_WEB) {\n        // It exists only on native platforms. We initialize it here because the ref to the animated component is available only post-mount\n        this._NativeEventsManager = new NativeEventsManager(this, options);\n      }\n      (_this$_NativeEventsMa = this._NativeEventsManager) === null || _this$_NativeEventsMa === void 0 || _this$_NativeEventsMa.attachEvents();\n      this._jsPropsUpdater.addOnJSPropsChangeListener(this);\n      this._attachAnimatedStyles();\n      this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n      const layout = this.props.layout;\n      if (layout) {\n        this._configureLayoutTransition();\n      }\n      if (IS_WEB) {\n        var _this$context2;\n        if (this.props.exiting) {\n          saveSnapshot(this._componentRef);\n        }\n        if (!this.props.entering || getReducedMotionFromConfig(this.props.entering)) {\n          this._isFirstRender = false;\n          return;\n        }\n        const skipEntering = (_this$context2 = this.context) === null || _this$context2 === void 0 ? void 0 : _this$context2.current;\n        if (!skipEntering) {\n          startWebLayoutAnimation(this.props, this._componentRef, LayoutAnimationType.ENTERING);\n        } else {\n          this._componentRef.style.visibility = 'initial';\n        }\n      }\n      this._isFirstRender = false;\n    }\n    componentWillUnmount() {\n      var _this$_NativeEventsMa2, _this$_sharedElementT;\n      (_this$_NativeEventsMa2 = this._NativeEventsManager) === null || _this$_NativeEventsMa2 === void 0 || _this$_NativeEventsMa2.detachEvents();\n      this._jsPropsUpdater.removeOnJSPropsChangeListener(this);\n      this._detachStyles();\n      this._InlinePropManager.detachInlineProps();\n      if (this.props.sharedTransitionTag) {\n        this._configureSharedTransition(true);\n      }\n      (_this$_sharedElementT = this._sharedElementTransition) === null || _this$_sharedElementT === void 0 || _this$_sharedElementT.unregisterTransition(this.getComponentViewTag(), true);\n      const exiting = this.props.exiting;\n      if (IS_WEB && this._componentRef && exiting && !getReducedMotionFromConfig(exiting)) {\n        addHTMLMutationObserver();\n        startWebLayoutAnimation(this.props, this._componentRef, LayoutAnimationType.EXITING);\n      } else if (exiting && !IS_WEB && !isFabric()) {\n        const reduceMotionInExiting = 'getReduceMotion' in exiting && typeof exiting.getReduceMotion === 'function' ? getReduceMotionFromConfig(exiting.getReduceMotion()) : getReduceMotionFromConfig();\n        if (!reduceMotionInExiting) {\n          var _this$props4;\n          updateLayoutAnimations(this.getComponentViewTag(), LayoutAnimationType.EXITING, maybeBuild(exiting, (_this$props4 = this.props) === null || _this$props4 === void 0 ? void 0 : _this$props4.style, AnimatedComponent.displayName));\n        }\n      }\n    }\n    getComponentViewTag() {\n      return this._getViewInfo().viewTag;\n    }\n    _detachStyles() {\n      const viewTag = this.getComponentViewTag();\n      if (viewTag !== -1 && this._styles !== null) {\n        var _this$props$animatedP;\n        for (const style of this._styles) {\n          style.viewDescriptors.remove(viewTag);\n        }\n        if ((_this$props$animatedP = this.props.animatedProps) !== null && _this$props$animatedP !== void 0 && _this$props$animatedP.viewDescriptors) {\n          this.props.animatedProps.viewDescriptors.remove(viewTag);\n        }\n        if (isFabric()) {\n          removeFromPropsRegistry(viewTag);\n        }\n      }\n    }\n    _updateFromNative(props) {\n      if (options !== null && options !== void 0 && options.setNativeProps) {\n        options.setNativeProps(this._componentRef, props);\n      } else {\n        var _this$_componentRef, _this$_componentRef$s;\n        (_this$_componentRef = this._componentRef) === null || _this$_componentRef === void 0 || (_this$_componentRef$s = _this$_componentRef.setNativeProps) === null || _this$_componentRef$s === void 0 || _this$_componentRef$s.call(_this$_componentRef, props);\n      }\n    }\n    _getViewInfo() {\n      if (this._viewInfo !== undefined) {\n        return this._viewInfo;\n      }\n      let viewTag;\n      let viewName;\n      let shadowNodeWrapper = null;\n      let viewConfig;\n      if (SHOULD_BE_USE_WEB) {\n        // At this point I assume that `_setComponentRef` was already called and `_component` is set.\n        // `this._component` on web represents HTMLElement of our component, that's why we use casting\n        viewTag = this._componentRef;\n        viewName = null;\n        shadowNodeWrapper = null;\n        viewConfig = null;\n      } else {\n        const hostInstance = findHostInstance(this);\n        if (!hostInstance) {\n          /* \n            findHostInstance can return null for a component that doesn't render anything \n            (render function returns null). Example: \n            svg Stop: https://github.com/react-native-svg/react-native-svg/blob/develop/src/elements/Stop.tsx\n          */\n          throw new ReanimatedError('Cannot find host instance for this component. Maybe it renders nothing?');\n        }\n        const viewInfo = getViewInfo(hostInstance);\n        viewTag = viewInfo.viewTag;\n        viewName = viewInfo.viewName;\n        viewConfig = viewInfo.viewConfig;\n        shadowNodeWrapper = isFabric() ? getShadowNodeWrapperFromRef(this, hostInstance) : null;\n      }\n      this._viewInfo = {\n        viewTag,\n        viewName,\n        shadowNodeWrapper,\n        viewConfig\n      };\n      return this._viewInfo;\n    }\n    _attachAnimatedStyles() {\n      var _this$props$animatedP2, _this$props$animatedP3;\n      const styles = this.props.style ? onlyAnimatedStyles(flattenArray(this.props.style)) : [];\n      const prevStyles = this._styles;\n      this._styles = styles;\n      const prevAnimatedProps = this._animatedProps;\n      this._animatedProps = this.props.animatedProps;\n      const {\n        viewTag,\n        viewName,\n        shadowNodeWrapper,\n        viewConfig\n      } = this._getViewInfo();\n\n      // update UI props whitelist for this view\n      const hasReanimated2Props = ((_this$props$animatedP2 = this.props.animatedProps) === null || _this$props$animatedP2 === void 0 ? void 0 : _this$props$animatedP2.viewDescriptors) || styles.length;\n      if (hasReanimated2Props && viewConfig) {\n        adaptViewConfig(viewConfig);\n      }\n\n      // remove old styles\n      if (prevStyles) {\n        // in most of the cases, views have only a single animated style and it remains unchanged\n        const hasOneSameStyle = styles.length === 1 && prevStyles.length === 1 && styles[0] === prevStyles[0];\n        if (!hasOneSameStyle) {\n          // otherwise, remove each style that is not present in new styles\n          for (const prevStyle of prevStyles) {\n            const isPresent = styles.some(style => style === prevStyle);\n            if (!isPresent) {\n              prevStyle.viewDescriptors.remove(viewTag);\n            }\n          }\n        }\n      }\n      styles.forEach(style => {\n        style.viewDescriptors.add({\n          tag: viewTag,\n          name: viewName,\n          shadowNodeWrapper\n        });\n        if (IS_JEST) {\n          /**\n           * We need to connect Jest's TestObject instance whose contains just\n           * props object with the updateProps() function where we update the\n           * properties of the component. We can't update props object directly\n           * because TestObject contains a copy of props - look at render\n           * function: const props = this._filterNonAnimatedProps(this.props);\n           */\n          this.jestAnimatedStyle.value = _objectSpread(_objectSpread({}, this.jestAnimatedStyle.value), style.initial.value);\n          style.jestAnimatedStyle.current = this.jestAnimatedStyle;\n        }\n      });\n\n      // detach old animatedProps\n      if (prevAnimatedProps && prevAnimatedProps !== this.props.animatedProps) {\n        prevAnimatedProps.viewDescriptors.remove(viewTag);\n      }\n\n      // attach animatedProps property\n      if ((_this$props$animatedP3 = this.props.animatedProps) !== null && _this$props$animatedP3 !== void 0 && _this$props$animatedP3.viewDescriptors) {\n        this.props.animatedProps.viewDescriptors.add({\n          tag: viewTag,\n          name: viewName,\n          shadowNodeWrapper: shadowNodeWrapper\n        });\n      }\n    }\n    componentDidUpdate(prevProps, _prevState,\n    // This type comes straight from React\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    snapshot) {\n      var _this$_NativeEventsMa3;\n      const layout = this.props.layout;\n      const oldLayout = prevProps.layout;\n      if (layout !== oldLayout) {\n        this._configureLayoutTransition();\n      }\n      if (this.props.sharedTransitionTag !== undefined || prevProps.sharedTransitionTag !== undefined) {\n        this._configureSharedTransition();\n      }\n      (_this$_NativeEventsMa3 = this._NativeEventsManager) === null || _this$_NativeEventsMa3 === void 0 || _this$_NativeEventsMa3.updateEvents(prevProps);\n      this._attachAnimatedStyles();\n      this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n      if (IS_WEB && this.props.exiting) {\n        saveSnapshot(this._componentRef);\n      }\n\n      // Snapshot won't be undefined because it comes from getSnapshotBeforeUpdate method\n      if (IS_WEB && snapshot !== null && this.props.layout && !getReducedMotionFromConfig(this.props.layout)) {\n        tryActivateLayoutTransition(this.props, this._componentRef, snapshot);\n      }\n    }\n    _configureLayoutTransition() {\n      if (IS_WEB) {\n        return;\n      }\n      const layout = this.props.layout ? maybeBuild(this.props.layout, undefined /* We don't have to warn user if style has common properties with animation for LAYOUT */, AnimatedComponent.displayName) : undefined;\n      updateLayoutAnimations(this.getComponentViewTag(), LayoutAnimationType.LAYOUT, layout);\n    }\n    _configureSharedTransition() {\n      var _ref, _this$props$sharedTra;\n      let isUnmounting = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n      if (IS_WEB) {\n        return;\n      }\n      const {\n        sharedTransitionTag\n      } = this.props;\n      if (!sharedTransitionTag) {\n        var _this$_sharedElementT2;\n        (_this$_sharedElementT2 = this._sharedElementTransition) === null || _this$_sharedElementT2 === void 0 || _this$_sharedElementT2.unregisterTransition(this.getComponentViewTag(), isUnmounting);\n        this._sharedElementTransition = null;\n        return;\n      }\n      const sharedElementTransition = (_ref = (_this$props$sharedTra = this.props.sharedTransitionStyle) !== null && _this$props$sharedTra !== void 0 ? _this$props$sharedTra : this._sharedElementTransition) !== null && _ref !== void 0 ? _ref : new SharedTransition();\n      sharedElementTransition.registerTransition(this.getComponentViewTag(), sharedTransitionTag, isUnmounting);\n      this._sharedElementTransition = sharedElementTransition;\n    }\n    // This is a component lifecycle method from React, therefore we are not calling it directly.\n    // It is called before the component gets rerendered. This way we can access components' position before it changed\n    // and later on, in componentDidUpdate, calculate translation for layout transition.\n    getSnapshotBeforeUpdate() {\n      var _this$_componentRef2;\n      if (IS_WEB && ((_this$_componentRef2 = this._componentRef) === null || _this$_componentRef2 === void 0 ? void 0 : _this$_componentRef2.getBoundingClientRect) !== undefined) {\n        return this._componentRef.getBoundingClientRect();\n      }\n      return null;\n    }\n    render() {\n      var _this$context3;\n      const filteredProps = this._PropsFilter.filterNonAnimatedProps(this);\n      if (IS_JEST) {\n        filteredProps.jestAnimatedStyle = this.jestAnimatedStyle;\n      }\n\n      // Layout animations on web are set inside `componentDidMount` method, which is called after first render.\n      // Because of that we can encounter a situation in which component is visible for a short amount of time, and later on animation triggers.\n      // I've tested that on various browsers and devices and it did not happen to me. To be sure that it won't happen to someone else,\n      // I've decided to hide component at first render. Its visibility is reset in `componentDidMount`.\n      if (this._isFirstRender && IS_WEB && filteredProps.entering && !getReducedMotionFromConfig(filteredProps.entering)) {\n        var _filteredProps$style;\n        filteredProps.style = _objectSpread(_objectSpread({}, (_filteredProps$style = filteredProps.style) !== null && _filteredProps$style !== void 0 ? _filteredProps$style : {}), {}, {\n          visibility: 'hidden' // Hide component until `componentDidMount` triggers\n        });\n      }\n      const platformProps = Platform.select({\n        web: {},\n        default: {\n          collapsable: false\n        }\n      });\n      const skipEntering = (_this$context3 = this.context) === null || _this$context3 === void 0 ? void 0 : _this$context3.current;\n      const nativeID = skipEntering || !isFabric() ? undefined : \"\".concat(this.reanimatedID);\n      const jestProps = IS_JEST ? {\n        jestInlineStyle: this.props.style,\n        jestAnimatedStyle: this.jestAnimatedStyle\n      } : {};\n      return /*#__PURE__*/React.createElement(Component, _extends({\n        nativeID: nativeID\n      }, filteredProps, jestProps, {\n        // Casting is used here, because ref can be null - in that case it cannot be assigned to HTMLElement.\n        // After spending some time trying to figure out what to do with this problem, we decided to leave it this way\n        ref: this._setComponentRef\n      }, platformProps));\n    }\n  }\n  _defineProperty(AnimatedComponent, \"contextType\", SkipEnteringContext);\n  AnimatedComponent.displayName = \"AnimatedComponent(\".concat(Component.displayName || Component.name || 'Component', \")\");\n  return /*#__PURE__*/React.forwardRef((props, ref) => {\n    return /*#__PURE__*/React.createElement(AnimatedComponent, _extends({}, props, ref === null ? null : {\n      forwardedRef: ref\n    }));\n  });\n}","map":{"version":3,"names":["_objectSpread","_defineProperty","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","React","Platform","invariant","adaptViewConfig","findHostInstance","enableLayoutAnimations","SharedTransition","LayoutAnimationType","getShadowNodeWrapperFromRef","removeFromPropsRegistry","getReduceMotionFromConfig","maybeBuild","SkipEnteringContext","JSPropsUpdater","flattenArray","setAndForwardRef","isFabric","isJest","isWeb","shouldBeUseWeb","InlinePropManager","PropsFilter","startWebLayoutAnimation","tryActivateLayoutTransition","configureWebLayoutAnimations","getReducedMotionFromConfig","saveSnapshot","updateLayoutAnimations","addHTMLMutationObserver","getViewInfo","NativeEventsManager","ReanimatedError","IS_WEB","IS_JEST","SHOULD_BE_USE_WEB","onlyAnimatedStyles","styles","filter","style","viewDescriptors","id","createAnimatedComponent","Component","options","prototype","isReactComponent","concat","name","AnimatedComponent","constructor","props","value","ref","componentRef","getAnimatableRef","getForwardedRef","forwardedRef","setLocalRef","_componentRef","_resolveComponentRef","_viewInfo","undefined","tag","getComponentViewTag","layout","entering","exiting","sharedTransitionTag","_this$context","_configureSharedTransition","reduceMotionInExiting","getReduceMotion","_this$props","EXITING","displayName","skipEntering","context","current","_this$props2","ENTERING","jestAnimatedStyle","_this$props3","reanimatedID","componentDidMount","_this$_NativeEventsMa","_NativeEventsManager","attachEvents","_jsPropsUpdater","addOnJSPropsChangeListener","_attachAnimatedStyles","_InlinePropManager","attachInlineProps","_getViewInfo","_configureLayoutTransition","_this$context2","_isFirstRender","visibility","componentWillUnmount","_this$_NativeEventsMa2","_this$_sharedElementT","detachEvents","removeOnJSPropsChangeListener","_detachStyles","detachInlineProps","_sharedElementTransition","unregisterTransition","_this$props4","viewTag","_styles","_this$props$animatedP","remove","animatedProps","_updateFromNative","setNativeProps","_this$_componentRef","_this$_componentRef$s","viewName","shadowNodeWrapper","viewConfig","hostInstance","viewInfo","_this$props$animatedP2","_this$props$animatedP3","prevStyles","prevAnimatedProps","_animatedProps","hasReanimated2Props","hasOneSameStyle","prevStyle","isPresent","some","forEach","add","initial","componentDidUpdate","prevProps","_prevState","snapshot","_this$_NativeEventsMa3","oldLayout","updateEvents","LAYOUT","_ref","_this$props$sharedTra","isUnmounting","_this$_sharedElementT2","sharedElementTransition","sharedTransitionStyle","registerTransition","getSnapshotBeforeUpdate","_this$_componentRef2","getBoundingClientRect","render","_this$context3","filteredProps","_PropsFilter","filterNonAnimatedProps","_filteredProps$style","platformProps","select","web","default","collapsable","nativeID","jestProps","jestInlineStyle","createElement","_setComponentRef","forwardRef"],"sources":["/Users/carter/WebstormProjects/personal-website/node_modules/react-native-reanimated/src/createAnimatedComponent/createAnimatedComponent.tsx"],"sourcesContent":["'use strict';\nimport type {\n  Component,\n  ComponentClass,\n  ComponentType,\n  FunctionComponent,\n  MutableRefObject,\n} from 'react';\nimport React from 'react';\nimport { Platform } from 'react-native';\nimport '../layoutReanimation/animationsManager';\nimport invariant from 'invariant';\nimport { adaptViewConfig } from '../ConfigHelper';\nimport { findHostInstance } from '../platform-specific/findHostInstance';\nimport { enableLayoutAnimations } from '../core';\nimport { SharedTransition, LayoutAnimationType } from '../layoutReanimation';\nimport type { StyleProps, ShadowNodeWrapper } from '../commonTypes';\nimport { getShadowNodeWrapperFromRef } from '../fabricUtils';\nimport { removeFromPropsRegistry } from '../PropsRegistry';\nimport { getReduceMotionFromConfig } from '../animation/util';\nimport { maybeBuild } from '../animationBuilder';\nimport { SkipEnteringContext } from '../component/LayoutAnimationConfig';\nimport type { AnimateProps } from '../helperTypes';\nimport JSPropsUpdater from './JSPropsUpdater';\nimport type {\n  AnimatedComponentProps,\n  AnimatedProps,\n  InitialComponentProps,\n  AnimatedComponentRef,\n  IAnimatedComponentInternal,\n  ViewInfo,\n  INativeEventsManager,\n  NestedArray,\n} from './commonTypes';\nimport { flattenArray } from './utils';\nimport setAndForwardRef from './setAndForwardRef';\nimport { isFabric, isJest, isWeb, shouldBeUseWeb } from '../PlatformChecker';\nimport { InlinePropManager } from './InlinePropManager';\nimport { PropsFilter } from './PropsFilter';\nimport {\n  startWebLayoutAnimation,\n  tryActivateLayoutTransition,\n  configureWebLayoutAnimations,\n  getReducedMotionFromConfig,\n  saveSnapshot,\n} from '../layoutReanimation/web';\nimport { updateLayoutAnimations } from '../UpdateLayoutAnimations';\nimport type { CustomConfig } from '../layoutReanimation/web/config';\nimport type { FlatList, FlatListProps } from 'react-native';\nimport { addHTMLMutationObserver } from '../layoutReanimation/web/domUtils';\nimport { getViewInfo } from './getViewInfo';\nimport { NativeEventsManager } from './NativeEventsManager';\nimport type { ReanimatedHTMLElement } from '../js-reanimated';\nimport { ReanimatedError } from '../errors';\n\nconst IS_WEB = isWeb();\nconst IS_JEST = isJest();\nconst SHOULD_BE_USE_WEB = shouldBeUseWeb();\n\nif (IS_WEB) {\n  configureWebLayoutAnimations();\n}\n\nfunction onlyAnimatedStyles(styles: StyleProps[]): StyleProps[] {\n  return styles.filter((style) => style?.viewDescriptors);\n}\n\ntype Options<P> = {\n  setNativeProps: (ref: AnimatedComponentRef, props: P) => void;\n};\n\n/**\n * Lets you create an Animated version of any React Native component.\n *\n * @param component - The component you want to make animatable.\n * @returns A component that Reanimated is capable of animating.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/core/createAnimatedComponent\n */\n\n// Don't change the order of overloads, since such a change breaks current behavior\nexport function createAnimatedComponent<P extends object>(\n  component: FunctionComponent<P>,\n  options?: Options<P>\n): FunctionComponent<AnimateProps<P>>;\n\nexport function createAnimatedComponent<P extends object>(\n  component: ComponentClass<P>,\n  options?: Options<P>\n): ComponentClass<AnimateProps<P>>;\n\nexport function createAnimatedComponent<P extends object>(\n  // Actually ComponentType<P = {}> = ComponentClass<P> | FunctionComponent<P> but we need this overload too\n  // since some external components (like FastImage) are typed just as ComponentType\n  component: ComponentType<P>,\n  options?: Options<P>\n): FunctionComponent<AnimateProps<P>> | ComponentClass<AnimateProps<P>>;\n\n/**\n * @deprecated Please use `Animated.FlatList` component instead of calling\n *   `Animated.createAnimatedComponent(FlatList)` manually.\n */\n// @ts-ignore This is required to create this overload, since type of createAnimatedComponent is incorrect and doesn't include typeof FlatList\nexport function createAnimatedComponent(\n  component: typeof FlatList<unknown>,\n  options?: Options<any>\n): ComponentClass<AnimateProps<FlatListProps<unknown>>>;\n\nlet id = 0;\n\nexport function createAnimatedComponent(\n  Component: ComponentType<InitialComponentProps>,\n  options?: Options<InitialComponentProps>\n): any {\n  invariant(\n    typeof Component !== 'function' ||\n      (Component.prototype && Component.prototype.isReactComponent),\n    `Looks like you're passing a function component \\`${Component.name}\\` to \\`createAnimatedComponent\\` function which supports only class components. Please wrap your function component with \\`React.forwardRef()\\` or use a class component instead.`\n  );\n\n  class AnimatedComponent\n    extends React.Component<AnimatedComponentProps<InitialComponentProps>>\n    implements IAnimatedComponentInternal\n  {\n    _styles: StyleProps[] | null = null;\n    _animatedProps?: Partial<AnimatedComponentProps<AnimatedProps>>;\n    _isFirstRender = true;\n    jestInlineStyle: NestedArray<StyleProps> | undefined;\n    jestAnimatedStyle: { value: StyleProps } = { value: {} };\n    _componentRef: AnimatedComponentRef | HTMLElement | null = null;\n    _sharedElementTransition: SharedTransition | null = null;\n    _jsPropsUpdater = new JSPropsUpdater();\n    _InlinePropManager = new InlinePropManager();\n    _PropsFilter = new PropsFilter();\n    _NativeEventsManager?: INativeEventsManager;\n    _viewInfo?: ViewInfo;\n    static displayName: string;\n    static contextType = SkipEnteringContext;\n    context!: React.ContextType<typeof SkipEnteringContext>;\n    reanimatedID = id++;\n\n    constructor(props: AnimatedComponentProps<InitialComponentProps>) {\n      super(props);\n      if (IS_JEST) {\n        this.jestAnimatedStyle = { value: {} };\n      }\n      const entering = this.props.entering;\n      if (entering && isFabric()) {\n        updateLayoutAnimations(\n          this.reanimatedID,\n          LayoutAnimationType.ENTERING,\n          maybeBuild(entering, this.props?.style, AnimatedComponent.displayName)\n        );\n      }\n    }\n\n    componentDidMount() {\n      if (!IS_WEB) {\n        // It exists only on native platforms. We initialize it here because the ref to the animated component is available only post-mount\n        this._NativeEventsManager = new NativeEventsManager(this, options);\n      }\n      this._NativeEventsManager?.attachEvents();\n      this._jsPropsUpdater.addOnJSPropsChangeListener(this);\n      this._attachAnimatedStyles();\n      this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n\n      const layout = this.props.layout;\n      if (layout) {\n        this._configureLayoutTransition();\n      }\n\n      if (IS_WEB) {\n        if (this.props.exiting) {\n          saveSnapshot(this._componentRef as HTMLElement);\n        }\n\n        if (\n          !this.props.entering ||\n          getReducedMotionFromConfig(this.props.entering as CustomConfig)\n        ) {\n          this._isFirstRender = false;\n          return;\n        }\n\n        const skipEntering = this.context?.current;\n\n        if (!skipEntering) {\n          startWebLayoutAnimation(\n            this.props,\n            this._componentRef as ReanimatedHTMLElement,\n            LayoutAnimationType.ENTERING\n          );\n        } else {\n          (this._componentRef as HTMLElement).style.visibility = 'initial';\n        }\n      }\n\n      this._isFirstRender = false;\n    }\n\n    componentWillUnmount() {\n      this._NativeEventsManager?.detachEvents();\n      this._jsPropsUpdater.removeOnJSPropsChangeListener(this);\n      this._detachStyles();\n      this._InlinePropManager.detachInlineProps();\n      if (this.props.sharedTransitionTag) {\n        this._configureSharedTransition(true);\n      }\n      this._sharedElementTransition?.unregisterTransition(\n        this.getComponentViewTag(),\n        true\n      );\n\n      const exiting = this.props.exiting;\n\n      if (\n        IS_WEB &&\n        this._componentRef &&\n        exiting &&\n        !getReducedMotionFromConfig(exiting as CustomConfig)\n      ) {\n        addHTMLMutationObserver();\n\n        startWebLayoutAnimation(\n          this.props,\n          this._componentRef as ReanimatedHTMLElement,\n          LayoutAnimationType.EXITING\n        );\n      } else if (exiting && !IS_WEB && !isFabric()) {\n        const reduceMotionInExiting =\n          'getReduceMotion' in exiting &&\n          typeof exiting.getReduceMotion === 'function'\n            ? getReduceMotionFromConfig(exiting.getReduceMotion())\n            : getReduceMotionFromConfig();\n        if (!reduceMotionInExiting) {\n          updateLayoutAnimations(\n            this.getComponentViewTag(),\n            LayoutAnimationType.EXITING,\n            maybeBuild(\n              exiting,\n              this.props?.style,\n              AnimatedComponent.displayName\n            )\n          );\n        }\n      }\n    }\n\n    getComponentViewTag() {\n      return this._getViewInfo().viewTag as number;\n    }\n\n    _detachStyles() {\n      const viewTag = this.getComponentViewTag();\n      if (viewTag !== -1 && this._styles !== null) {\n        for (const style of this._styles) {\n          style.viewDescriptors.remove(viewTag);\n        }\n        if (this.props.animatedProps?.viewDescriptors) {\n          this.props.animatedProps.viewDescriptors.remove(viewTag);\n        }\n        if (isFabric()) {\n          removeFromPropsRegistry(viewTag);\n        }\n      }\n    }\n\n    _updateFromNative(props: StyleProps) {\n      if (options?.setNativeProps) {\n        options.setNativeProps(\n          this._componentRef as AnimatedComponentRef,\n          props\n        );\n      } else {\n        (this._componentRef as AnimatedComponentRef)?.setNativeProps?.(props);\n      }\n    }\n\n    _getViewInfo(): ViewInfo {\n      if (this._viewInfo !== undefined) {\n        return this._viewInfo;\n      }\n\n      let viewTag: number | HTMLElement | null;\n      let viewName: string | null;\n      let shadowNodeWrapper: ShadowNodeWrapper | null = null;\n      let viewConfig;\n\n      if (SHOULD_BE_USE_WEB) {\n        // At this point I assume that `_setComponentRef` was already called and `_component` is set.\n        // `this._component` on web represents HTMLElement of our component, that's why we use casting\n        viewTag = this._componentRef as HTMLElement;\n        viewName = null;\n        shadowNodeWrapper = null;\n        viewConfig = null;\n      } else {\n        const hostInstance = findHostInstance(this);\n        if (!hostInstance) {\n          /* \n            findHostInstance can return null for a component that doesn't render anything \n            (render function returns null). Example: \n            svg Stop: https://github.com/react-native-svg/react-native-svg/blob/develop/src/elements/Stop.tsx\n          */\n          throw new ReanimatedError(\n            'Cannot find host instance for this component. Maybe it renders nothing?'\n          );\n        }\n\n        const viewInfo = getViewInfo(hostInstance);\n        viewTag = viewInfo.viewTag;\n        viewName = viewInfo.viewName;\n        viewConfig = viewInfo.viewConfig;\n        shadowNodeWrapper = isFabric()\n          ? getShadowNodeWrapperFromRef(this, hostInstance)\n          : null;\n      }\n      this._viewInfo = { viewTag, viewName, shadowNodeWrapper, viewConfig };\n      return this._viewInfo;\n    }\n\n    _attachAnimatedStyles() {\n      const styles = this.props.style\n        ? onlyAnimatedStyles(flattenArray<StyleProps>(this.props.style))\n        : [];\n      const prevStyles = this._styles;\n      this._styles = styles;\n\n      const prevAnimatedProps = this._animatedProps;\n      this._animatedProps = this.props.animatedProps;\n\n      const { viewTag, viewName, shadowNodeWrapper, viewConfig } =\n        this._getViewInfo();\n\n      // update UI props whitelist for this view\n      const hasReanimated2Props =\n        this.props.animatedProps?.viewDescriptors || styles.length;\n      if (hasReanimated2Props && viewConfig) {\n        adaptViewConfig(viewConfig);\n      }\n\n      // remove old styles\n      if (prevStyles) {\n        // in most of the cases, views have only a single animated style and it remains unchanged\n        const hasOneSameStyle =\n          styles.length === 1 &&\n          prevStyles.length === 1 &&\n          styles[0] === prevStyles[0];\n\n        if (!hasOneSameStyle) {\n          // otherwise, remove each style that is not present in new styles\n          for (const prevStyle of prevStyles) {\n            const isPresent = styles.some((style) => style === prevStyle);\n            if (!isPresent) {\n              prevStyle.viewDescriptors.remove(viewTag);\n            }\n          }\n        }\n      }\n\n      styles.forEach((style) => {\n        style.viewDescriptors.add({\n          tag: viewTag,\n          name: viewName,\n          shadowNodeWrapper,\n        });\n        if (IS_JEST) {\n          /**\n           * We need to connect Jest's TestObject instance whose contains just\n           * props object with the updateProps() function where we update the\n           * properties of the component. We can't update props object directly\n           * because TestObject contains a copy of props - look at render\n           * function: const props = this._filterNonAnimatedProps(this.props);\n           */\n          this.jestAnimatedStyle.value = {\n            ...this.jestAnimatedStyle.value,\n            ...style.initial.value,\n          };\n          style.jestAnimatedStyle.current = this.jestAnimatedStyle;\n        }\n      });\n\n      // detach old animatedProps\n      if (prevAnimatedProps && prevAnimatedProps !== this.props.animatedProps) {\n        prevAnimatedProps.viewDescriptors!.remove(viewTag as number);\n      }\n\n      // attach animatedProps property\n      if (this.props.animatedProps?.viewDescriptors) {\n        this.props.animatedProps.viewDescriptors.add({\n          tag: viewTag as number,\n          name: viewName!,\n          shadowNodeWrapper: shadowNodeWrapper!,\n        });\n      }\n    }\n\n    componentDidUpdate(\n      prevProps: AnimatedComponentProps<InitialComponentProps>,\n      _prevState: Readonly<unknown>,\n      // This type comes straight from React\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      snapshot: DOMRect | null\n    ) {\n      const layout = this.props.layout;\n      const oldLayout = prevProps.layout;\n      if (layout !== oldLayout) {\n        this._configureLayoutTransition();\n      }\n      if (\n        this.props.sharedTransitionTag !== undefined ||\n        prevProps.sharedTransitionTag !== undefined\n      ) {\n        this._configureSharedTransition();\n      }\n      this._NativeEventsManager?.updateEvents(prevProps);\n      this._attachAnimatedStyles();\n      this._InlinePropManager.attachInlineProps(this, this._getViewInfo());\n\n      if (IS_WEB && this.props.exiting) {\n        saveSnapshot(this._componentRef as HTMLElement);\n      }\n\n      // Snapshot won't be undefined because it comes from getSnapshotBeforeUpdate method\n      if (\n        IS_WEB &&\n        snapshot !== null &&\n        this.props.layout &&\n        !getReducedMotionFromConfig(this.props.layout as CustomConfig)\n      ) {\n        tryActivateLayoutTransition(\n          this.props,\n          this._componentRef as ReanimatedHTMLElement,\n          snapshot\n        );\n      }\n    }\n\n    _configureLayoutTransition() {\n      if (IS_WEB) {\n        return;\n      }\n\n      const layout = this.props.layout\n        ? maybeBuild(\n            this.props.layout,\n            undefined /* We don't have to warn user if style has common properties with animation for LAYOUT */,\n            AnimatedComponent.displayName\n          )\n        : undefined;\n      updateLayoutAnimations(\n        this.getComponentViewTag(),\n        LayoutAnimationType.LAYOUT,\n        layout\n      );\n    }\n\n    _configureSharedTransition(isUnmounting = false) {\n      if (IS_WEB) {\n        return;\n      }\n\n      const { sharedTransitionTag } = this.props;\n      if (!sharedTransitionTag) {\n        this._sharedElementTransition?.unregisterTransition(\n          this.getComponentViewTag(),\n          isUnmounting\n        );\n        this._sharedElementTransition = null;\n        return;\n      }\n      const sharedElementTransition =\n        this.props.sharedTransitionStyle ??\n        this._sharedElementTransition ??\n        new SharedTransition();\n      sharedElementTransition.registerTransition(\n        this.getComponentViewTag(),\n        sharedTransitionTag,\n        isUnmounting\n      );\n      this._sharedElementTransition = sharedElementTransition;\n    }\n\n    _resolveComponentRef = (ref: Component | HTMLElement | null) => {\n      const componentRef = ref as AnimatedComponentRef;\n      // Component can specify ref which should be animated when animated version of the component is created.\n      // Otherwise, we animate the component itself.\n      if (componentRef && componentRef.getAnimatableRef) {\n        return componentRef.getAnimatableRef();\n      }\n      return componentRef;\n    };\n\n    _setComponentRef = setAndForwardRef<Component | HTMLElement>({\n      getForwardedRef: () =>\n        this.props.forwardedRef as MutableRefObject<\n          Component<Record<string, unknown>, Record<string, unknown>, unknown>\n        >,\n      setLocalRef: (ref) => {\n        if (!ref) {\n          // component has been unmounted\n          return;\n        }\n        if (ref !== this._componentRef) {\n          this._componentRef = this._resolveComponentRef(ref);\n          // if ref is changed, reset viewInfo\n          this._viewInfo = undefined;\n        }\n        const tag = this.getComponentViewTag();\n\n        const { layout, entering, exiting, sharedTransitionTag } = this.props;\n        if (layout || entering || exiting || sharedTransitionTag) {\n          if (!SHOULD_BE_USE_WEB) {\n            enableLayoutAnimations(true, false);\n          }\n\n          if (sharedTransitionTag) {\n            this._configureSharedTransition();\n          }\n          if (exiting && isFabric()) {\n            const reduceMotionInExiting =\n              'getReduceMotion' in exiting &&\n              typeof exiting.getReduceMotion === 'function'\n                ? getReduceMotionFromConfig(exiting.getReduceMotion())\n                : getReduceMotionFromConfig();\n            if (!reduceMotionInExiting) {\n              updateLayoutAnimations(\n                tag,\n                LayoutAnimationType.EXITING,\n                maybeBuild(\n                  exiting,\n                  this.props?.style,\n                  AnimatedComponent.displayName\n                )\n              );\n            }\n          }\n\n          const skipEntering = this.context?.current;\n          if (entering && !skipEntering && !IS_WEB) {\n            updateLayoutAnimations(\n              tag,\n              LayoutAnimationType.ENTERING,\n              maybeBuild(\n                entering,\n                this.props?.style,\n                AnimatedComponent.displayName\n              )\n            );\n          }\n        }\n      },\n    });\n\n    // This is a component lifecycle method from React, therefore we are not calling it directly.\n    // It is called before the component gets rerendered. This way we can access components' position before it changed\n    // and later on, in componentDidUpdate, calculate translation for layout transition.\n    getSnapshotBeforeUpdate() {\n      if (\n        IS_WEB &&\n        (this._componentRef as HTMLElement)?.getBoundingClientRect !== undefined\n      ) {\n        return (this._componentRef as HTMLElement).getBoundingClientRect();\n      }\n\n      return null;\n    }\n\n    render() {\n      const filteredProps = this._PropsFilter.filterNonAnimatedProps(this);\n\n      if (IS_JEST) {\n        filteredProps.jestAnimatedStyle = this.jestAnimatedStyle;\n      }\n\n      // Layout animations on web are set inside `componentDidMount` method, which is called after first render.\n      // Because of that we can encounter a situation in which component is visible for a short amount of time, and later on animation triggers.\n      // I've tested that on various browsers and devices and it did not happen to me. To be sure that it won't happen to someone else,\n      // I've decided to hide component at first render. Its visibility is reset in `componentDidMount`.\n      if (\n        this._isFirstRender &&\n        IS_WEB &&\n        filteredProps.entering &&\n        !getReducedMotionFromConfig(filteredProps.entering as CustomConfig)\n      ) {\n        filteredProps.style = {\n          ...(filteredProps.style ?? {}),\n          visibility: 'hidden', // Hide component until `componentDidMount` triggers\n        };\n      }\n\n      const platformProps = Platform.select({\n        web: {},\n        default: { collapsable: false },\n      });\n\n      const skipEntering = this.context?.current;\n      const nativeID =\n        skipEntering || !isFabric() ? undefined : `${this.reanimatedID}`;\n\n      const jestProps = IS_JEST\n        ? {\n            jestInlineStyle: this.props.style,\n            jestAnimatedStyle: this.jestAnimatedStyle,\n          }\n        : {};\n\n      return (\n        <Component\n          nativeID={nativeID}\n          {...filteredProps}\n          {...jestProps}\n          // Casting is used here, because ref can be null - in that case it cannot be assigned to HTMLElement.\n          // After spending some time trying to figure out what to do with this problem, we decided to leave it this way\n          ref={this._setComponentRef as (ref: Component) => void}\n          {...platformProps}\n        />\n      );\n    }\n  }\n\n  AnimatedComponent.displayName = `AnimatedComponent(${\n    Component.displayName || Component.name || 'Component'\n  })`;\n\n  return React.forwardRef<Component>((props, ref) => {\n    return (\n      <AnimatedComponent\n        {...props}\n        {...(ref === null ? null : { forwardedRef: ref })}\n      />\n    );\n  });\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}